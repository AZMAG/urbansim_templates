

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Template APIs &mdash; UrbanSim Templates 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="ModelManager API" href="modelmanager.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> UrbanSim Templates
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="modelmanager.html">ModelManager API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Template APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ols-regression">OLS Regression</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#binary-logit">Binary Logit</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#small-multinomial-logit">Small Multinomial Logit</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#large-multinomial-logit">Large Multinomial Logit</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#segmented-large-multinomial-logit">Segmented Large Multinomial Logit</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#template-step-parent-class">Template Step parent class</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities API</a></li>
<li class="toctree-l1"><a class="reference internal" href="design-patterns.html">Design patterns</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UrbanSim Templates</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Template APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/model-steps.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="template-apis">
<h1>Template APIs<a class="headerlink" href="#template-apis" title="Permalink to this headline">¶</a></h1>
<p>The following templates are included in the core package. ModelManager can also work with templates defined elsewhere, as long as they follow the specifications described in the design guidelines.</p>
<div class="section" id="ols-regression">
<h2>OLS Regression<a class="headerlink" href="#ols-regression" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.OLSRegressionStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">OLSRegressionStep</code><span class="sig-paren">(</span><em>tables=None</em>, <em>model_expression=None</em>, <em>filters=None</em>, <em>out_tables=None</em>, <em>out_column=None</em>, <em>out_transform=None</em>, <em>out_filters=None</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/regression.html#OLSRegressionStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.OLSRegressionStep" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for building OLS (ordinary least squares) regression model steps. This extends 
TemplateStep, where some common functionality is defined. Estimation and simulation
are handled by <cite>urbansim.models.RegressionModel()</cite>.</p>
<p>Expected usage:
- create a model object
- specify some parameters
- run the <cite>fit()</cite> method
- iterate as needed</p>
<p>Then, for simulation:
- specify some simulation parameters
- use the <cite>run()</cite> method for interactive testing
- use <cite>modelmanager.register()</cite> to save the model to Orca and disk
- registered steps can be accessed via ModelManager and Orca</p>
<p>All parameters listed in the constructor can be set directly on the class object,
at any time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to draw data from. The first table is the primary one. 
Any additional tables need to have merge relationships (“broadcasts”) specified
so that they can be merged unambiguously onto the first table. Among them, the 
tables must contain all variables used in the model expression and filters. The
left-hand-side variable should be in the primary table. The <cite>tables</cite> parameter is 
required for fitting a model, but it does not have to be provided when the object 
is created.</p>
</dd>
<dt><strong>model_expression</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Patsy formula containing both the left- and right-hand sides of the model
expression: <a class="reference external" href="http://patsy.readthedocs.io/en/latest/formulas.html">http://patsy.readthedocs.io/en/latest/formulas.html</a>
This parameter is required for fitting a model, but it does not have to be 
provided when the object is created.</p>
</dd>
<dt><strong>filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before fitting the model. These are passed to 
<cite>pd.DataFrame.query()</cite>. Filters are applied after any additional tables are merged 
onto the primary one. Replaces the <cite>fit_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to use for simulation. If not provided, the <cite>tables</cite> 
parameter will be used. Same guidance applies: the tables must be able to be 
merged unambiguously, and must include all columns used in the right-hand-side
of the model expression and in the <cite>out_filters</cite>.</p>
</dd>
<dt><strong>out_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first">Name of the column to write predicted values to. If it does not already exist
in the primary output table, it will be created. If not provided, the left-hand-
side variable from the model expression will be used. Replaces the <cite>out_fname</cite> 
argument in UrbanSim.</p>
<p class="last"># TO DO - auto-generation not yet working; column must exist in the primary table</p>
</dd>
<dt><strong>out_transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">callable, optional</span></dt>
<dd><p class="first last">Transformation to apply to the predicted values, for example to reverse a 
transformation of the left-hand-side variable in the model expression. Replaces
the <cite>ytransform</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before simulation. If not provided, no filters will
be applied. Replaces the <cite>predict_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the model step, passed to ModelManager. If none is provided, a name is
generated each time the <cite>fit()</cite> method runs.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">Tags, passed to ModelManager.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out_tables</strong></dt>
<dd></dd>
<dt><strong>tables</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.OLSRegressionStep.fit" title="urbansim_templates.models.OLSRegressionStep.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>()</td>
<td>Fit the model; save and report results.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.OLSRegressionStep.from_dict" title="urbansim_templates.models.OLSRegressionStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.OLSRegressionStep.run" title="urbansim_templates.models.OLSRegressionStep.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</td>
<td>Run the model step: calculate predicted values and use them to update a column.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.OLSRegressionStep.to_dict" title="urbansim_templates.models.OLSRegressionStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim_templates.models.OLSRegressionStep.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/regression.html#OLSRegressionStep.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.OLSRegressionStep.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model; save and report results.</p>
<p>This currently uses the <cite>RegressionModel</cite> class from core UrbanSim. We save the 
model object for prediction and interactive use (<cite>model</cite>, with type
<cite>urbansim.models.regression.RegressionModel</cite>).</p>
<p>For example, you can use this to get a latex version of the summary table using
<cite>m.model.model_fit.summary().as_latex()</cite>. This may change in the future if we 
refactor the template to use StatsModels directly.</p>
</dd></dl>

<dl class="classmethod">
<dt id="urbansim_templates.models.OLSRegressionStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/regression.html#OLSRegressionStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.OLSRegressionStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>OLSRegressionStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.OLSRegressionStep.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/regression.html#OLSRegressionStep.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.OLSRegressionStep.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the model step: calculate predicted values and use them to update a column.</p>
<p>The predicted values are written to Orca and also saved to the class object for 
interactive use (<cite>predicted_values</cite>, with type pd.Series). But they are not saved 
in the dictionary representation of the model step.</p>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.OLSRegressionStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/regression.html#OLSRegressionStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.OLSRegressionStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="binary-logit">
<h2>Binary Logit<a class="headerlink" href="#binary-logit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.BinaryLogitStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">BinaryLogitStep</code><span class="sig-paren">(</span><em>tables=None</em>, <em>model_expression=None</em>, <em>filters=None</em>, <em>out_tables=None</em>, <em>out_column=None</em>, <em>out_filters=None</em>, <em>out_value_true=1</em>, <em>out_value_false=0</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/binary_logit.html#BinaryLogitStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.BinaryLogitStep" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for building binary logit model steps. This extends TemplateStep, where some
common functionality is defined. Estimation is handled by Statsmodels and simulation
is handled within this class.</p>
<p>Expected usage:
- create a model object
- specify some parameters
- run the <cite>fit()</cite> method
- iterate as needed</p>
<p>Then, for simulation:
- specify some simulation parameters
- use the <cite>run()</cite> method for interactive testing
- use <cite>modelmanager.register()</cite> to save the model to Orca and disk
- registered steps can be accessed via ModelManager and Orca</p>
<p>All parameters listed in the constructor can be set directly on the class object,
at any time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to draw data from. The first table is the primary one. 
Any additional tables need to have merge relationships (“broadcasts”) specified
so that they can be merged unambiguously onto the first table. Among them, the 
tables must contain all variables used in the model expression and filters. The
left-hand-side variable should be in the primary table. The <cite>tables</cite> parameter is 
required for fitting a model, but it does not have to be provided when the object 
is created.</p>
</dd>
<dt><strong>model_expression</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Patsy formula containing both the left- and right-hand sides of the model
expression: <a class="reference external" href="http://patsy.readthedocs.io/en/latest/formulas.html">http://patsy.readthedocs.io/en/latest/formulas.html</a>
This parameter is required for fitting a model, but it does not have to be 
provided when the object is created.</p>
</dd>
<dt><strong>filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before fitting the model. These are passed to 
<cite>pd.DataFrame.query()</cite>. Filters are applied after any additional tables are merged 
onto the primary one. Replaces the <cite>fit_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to use for simulation. If not provided, the <cite>tables</cite> 
parameter will be used. Same guidance applies: the tables must be able to be 
merged unambiguously, and must include all columns used in the right-hand-side
of the model expression and in the <cite>out_filters</cite>.</p>
</dd>
<dt><strong>out_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first">Name of the column to write simulated choices to. If it does not already exist
in the primary output table, it will be created. If not provided, the left-hand-
side variable from the model expression will be used. Replaces the <cite>out_fname</cite> 
argument in UrbanSim.</p>
<p class="last"># TO DO - auto-generation not yet working; column must exist in the primary table</p>
</dd>
<dt><strong>out_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before simulation. If not provided, no filters will
be applied. Replaces the <cite>predict_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_value_true</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numeric or str, optional</span></dt>
<dd><p class="first last">Value to save to the output column corresponding to an affirmative choice. 
Default is 1 (int). Use keyword ‘nothing’ to leave values unchanged.</p>
</dd>
<dt><strong>out_value_false</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numeric or str, optional</span></dt>
<dd><p class="first last">Value to save to the output column corresponding to a negative choice. Default 
is 0 (int). Use keyword ‘nothing’ to leave values unchanged.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the model step, passed to ModelManager. If none is provided, a name is
generated each time the <cite>fit()</cite> method runs.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">Tags, passed to ModelManager.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out_tables</strong></dt>
<dd></dd>
<dt><strong>tables</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.BinaryLogitStep.fit" title="urbansim_templates.models.BinaryLogitStep.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>()</td>
<td>Fit the model; save and report results.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.BinaryLogitStep.from_dict" title="urbansim_templates.models.BinaryLogitStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.BinaryLogitStep.run" title="urbansim_templates.models.BinaryLogitStep.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</td>
<td>Run the model step: calculate simulated choices and use them to update a column.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.BinaryLogitStep.to_dict" title="urbansim_templates.models.BinaryLogitStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim_templates.models.BinaryLogitStep.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/binary_logit.html#BinaryLogitStep.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.BinaryLogitStep.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model; save and report results. This currently uses the Statsmodels
Logit class with default estimation settings. (It will shift to ChoiceModels
once more infrastructure is in place.)</p>
<p>The <cite>fit()</cite> method can be run as many times as desired. Results will not be saved 
with Orca or ModelManager until the <cite>register()</cite> method is run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="urbansim_templates.models.BinaryLogitStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/binary_logit.html#BinaryLogitStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.BinaryLogitStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>BinaryLogitStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.BinaryLogitStep.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/binary_logit.html#BinaryLogitStep.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.BinaryLogitStep.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the model step: calculate simulated choices and use them to update a column.</p>
<p>For binary logit, we calculate predicted probabilities and then perform a weighted 
random draw to determine the simulated binary outcomes. This is done directly from 
the fitted parameters, because we can’t conveniently regenerate a Statsmodels 
results object from a dictionary representation.</p>
<p>The predicted probabilities and simulated choices are saved to the class object 
for interactive use (<cite>probabilities</cite> and <cite>choices</cite>, with type pd.Series) but are 
not persisted in the dictionary representation of the model step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.BinaryLogitStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/binary_logit.html#BinaryLogitStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.BinaryLogitStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="small-multinomial-logit">
<h2>Small Multinomial Logit<a class="headerlink" href="#small-multinomial-logit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.SmallMultinomialLogitStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">SmallMultinomialLogitStep</code><span class="sig-paren">(</span><em>tables=None</em>, <em>model_expression=None</em>, <em>model_labels=None</em>, <em>choice_column=None</em>, <em>initial_coefs=None</em>, <em>filters=None</em>, <em>out_tables=None</em>, <em>out_column=None</em>, <em>out_filters=None</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/small_multinomial_logit.html#SmallMultinomialLogitStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SmallMultinomialLogitStep" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for building multinomial logit model steps where the number of alternatives is
“small”. Estimation is handled by PyLogit via the ChoiceModels API. Simulation is 
handled by PyLogit (probabilities) and ChoiceModels (simulation draws).</p>
<p>Multinomial logit models can involve a range of different specification and estimation
mechanics. For now these are separated into two templates. What’s the difference?</p>
<p>“Small” MNL:
- data is in a single table (choosers)
- each alternative can have a different model expression
- all the alternatives are available to all choosers
- estimation and simulation use the PyLogit engine (via ChoiceModels)</p>
<p>“Large” MNL:
- data is in two tables (choosers and alternatives)
- each alternative has the same model expression
- N alternatives are sampled for each chooser
- estimation and simulation use the ChoiceModels engine (formerly UrbanSim MNL)</p>
<p>TO DO:
- Add support for specifying availability of alternatives
- Add support for sampling weights
- Add support for on-the-fly interaction calculations (e.g. distance)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to draw data from. The first table is the primary one. 
Any additional tables need to have merge relationships (“broadcasts”) specified
so that they can be merged unambiguously onto the first table. Among them, the 
tables must contain all variables used in the model expression and filters. The
index of the primary table should be a unique ID. The <cite>tables</cite> parameter is 
required for fitting a model, but it does not have to be provided when the object 
is created. Reserved column names: ‘_obs_id’, ‘_alt_id’, ‘_chosen’.</p>
</dd>
<dt><strong>model_expression</strong> <span class="classifier-delimiter">:</span> <span class="classifier">OrderedDict, optional</span></dt>
<dd><p class="first last">PyLogit model expression. This parameter is required for fitting a model, but it 
does not have to be provided when the object is created.</p>
</dd>
<dt><strong>model_labels</strong> <span class="classifier-delimiter">:</span> <span class="classifier">OrderedDict, optional</span></dt>
<dd><p class="first last">PyLogit model labels.</p>
</dd>
<dt><strong>choice_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the column indicating observed choices, for model estimation. The column
should contain integers matching the alternatives in the model expression. This
parameter is required for fitting a model, but it does not have to be provided
when the object is created.</p>
</dd>
<dt><strong>initial_coefs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of numerics, optional</span></dt>
<dd><p class="first last">Starting values for the parameter estimation algorithm, passed to PyLogit. Length 
must be equal to the number of parameters being estimated. If this is not 
provided, zeros will be used.</p>
</dd>
<dt><strong>filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before fitting the model. These are passed to 
<cite>pd.DataFrame.query()</cite>. Filters are applied after any additional tables are merged 
onto the primary one. Replaces the <cite>fit_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to use for simulation. If not provided, the <cite>tables</cite> 
parameter will be used. Same guidance applies: the tables must be able to be 
merged unambiguously, and must include all columns used in the model expression 
and in the <cite>out_filters</cite>.</p>
</dd>
<dt><strong>out_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first">Name of the column to write simulated choices to. If it does not already exist
in the primary output table, it will be created. If not provided, the 
<cite>choice_column</cite> will be used. Replaces the <cite>out_fname</cite> argument in UrbanSim.</p>
<p class="last"># TO DO - auto-generation not yet working; column must exist in the primary table</p>
</dd>
<dt><strong>out_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the data before simulation. If not provided, no filters will
be applied. Replaces the <cite>predict_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the model step, passed to ModelManager. If none is provided, a name is
generated each time the <cite>fit()</cite> method runs.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">Tags, passed to ModelManager.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out_tables</strong></dt>
<dd></dd>
<dt><strong>tables</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SmallMultinomialLogitStep.fit" title="urbansim_templates.models.SmallMultinomialLogitStep.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>()</td>
<td>Fit the model; save and report results.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SmallMultinomialLogitStep.from_dict" title="urbansim_templates.models.SmallMultinomialLogitStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SmallMultinomialLogitStep.run" title="urbansim_templates.models.SmallMultinomialLogitStep.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</td>
<td>Run the model step: calculate simulated choices and use them to update a column.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SmallMultinomialLogitStep.to_dict" title="urbansim_templates.models.SmallMultinomialLogitStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim_templates.models.SmallMultinomialLogitStep.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/small_multinomial_logit.html#SmallMultinomialLogitStep.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SmallMultinomialLogitStep.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model; save and report results. This uses PyLogit via ChoiceModels.</p>
<p>The <cite>fit()</cite> method can be run as many times as desired. Results will not be saved 
with Orca or ModelManager until the <cite>register()</cite> method is run.</p>
</dd></dl>

<dl class="classmethod">
<dt id="urbansim_templates.models.SmallMultinomialLogitStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/small_multinomial_logit.html#SmallMultinomialLogitStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SmallMultinomialLogitStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>SmallMultinomialLogitStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SmallMultinomialLogitStep.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/small_multinomial_logit.html#SmallMultinomialLogitStep.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SmallMultinomialLogitStep.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the model step: calculate simulated choices and use them to update a column.</p>
<p>Alternatives that appear in the estimation data but not in the model expression
will not be available for simulation.</p>
<p>Predicted probabilities come from PyLogit. Monte Carlo simulation of choices is
performed directly. (This functionality will move to ChoiceModels.)</p>
<p>The predicted probabilities and simulated choices are saved to the class object 
for interactive use (<cite>probabilities</cite> with type pd.DataFrame, and <cite>choices</cite> with 
type pd.Series) but are not persisted in the dictionary representation of the 
model step.</p>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SmallMultinomialLogitStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/small_multinomial_logit.html#SmallMultinomialLogitStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SmallMultinomialLogitStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="large-multinomial-logit">
<h2>Large Multinomial Logit<a class="headerlink" href="#large-multinomial-logit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.LargeMultinomialLogitStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">LargeMultinomialLogitStep</code><span class="sig-paren">(</span><em>choosers=None</em>, <em>alternatives=None</em>, <em>model_expression=None</em>, <em>choice_column=None</em>, <em>chooser_filters=None</em>, <em>chooser_sample_size=None</em>, <em>alt_filters=None</em>, <em>alt_sample_size=None</em>, <em>out_choosers=None</em>, <em>out_alternatives=None</em>, <em>out_column=None</em>, <em>out_chooser_filters=None</em>, <em>out_alt_filters=None</em>, <em>constrained_choices=False</em>, <em>alt_capacity=None</em>, <em>chooser_size=None</em>, <em>max_iter=None</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/large_multinomial_logit.html#LargeMultinomialLogitStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.LargeMultinomialLogitStep" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for building standard multinomial logit model steps where alternatives are 
interchangeable and all have the same model expression. Supports random sampling of 
alternatives.</p>
<p>Estimation and simulation are performed using ChoiceModels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>choosers</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to draw choice scenario data from. The first table is the
primary one. Any additional tables need to have merge relationships (“broadcasts”)
specified so that they can be merged unambiguously onto the first table. The index
of the primary table should be a unique ID. In this template, the ‘choosers’ and
‘alternatives’ parameters replace the ‘tables’ parameter. Both are required for 
fitting a model, but do not have to be provided when the object is created.
Reserved column names: ‘chosen’.</p>
</dd>
<dt><strong>alternatives</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables containing data about alternatives. The first table is the
primary one. Any additional tables need to have merge relationships (“broadcasts”)
specified so that they can be merged unambiguously onto the first table. The index
of the primary table should be a unique ID. In this template, the ‘choosers’ and
‘alternatives’ parameters replace the ‘tables’ parameter. Both are required for 
fitting a model, but do not have to be provided when the object is created.
Reserved column names: ‘chosen’.</p>
</dd>
<dt><strong>model_expression</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Patsy-style right-hand-side model expression representing the utility of a
single alternative. Passed to <cite>choicemodels.MultinomialLogit()</cite>. This parameter
is required for fitting a model, but does not have to be provided when the object
is created.</p>
</dd>
<dt><strong>choice_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the column indicating observed choices, for model estimation. The column
should contain integers matching the id of the primary <cite>alternatives</cite> table. This
parameter is required for fitting a model, but it does not have to be provided
when the object is created. Not required for simulation.</p>
</dd>
<dt><strong>chooser_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the chooser data before fitting the model. These are passed to 
<cite>pd.DataFrame.query()</cite>. Filters are applied after any additional tables are merged 
onto the primary one. Replaces the <cite>fit_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>chooser_sample_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Number of choosers to sample, for faster model fitting. Sampling is random and may 
vary between model runs.</p>
</dd>
<dt><strong>alt_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the alternatives data before fitting the model. These are 
passed to <cite>pd.DataFrame.query()</cite>. Filters are applied after any additional tables 
are merged onto the primary one. Replaces the <cite>fit_filters</cite> argument in UrbanSim.
Choosers whose chosen alternative is removed by these filters will not be included
in the model estimation.</p>
</dd>
<dt><strong>alt_sample_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Numer of alternatives to sample for each choice scenario. For now, only random 
sampling is supported. If this parameter is not provided, we will use a sample
size of one less than the total number of alternatives. (ChoiceModels codebase
currently requires sampling.) The same sample size is used for estimation and
prediction.</p>
</dd>
<dt><strong>out_choosers</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables to draw choice scenario data from, for simulation. If not 
provided, the <cite>choosers</cite> parameter will be used. Same guidance applies. Reserved 
column names: ‘chosen’, ‘join_index’, ‘observation_id’.</p>
</dd>
<dt><strong>out_alternatives</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Name(s) of Orca tables containing data about alternatives, for simulation. If not 
provided, the <cite>alternatives</cite> parameter will be used. Same guidance applies. 
Reserved column names: ‘chosen’, ‘join_index’, ‘observation_id’.</p>
</dd>
<dt><strong>out_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the column to write simulated choices to. If it does not already exist
in the primary <cite>out_choosers</cite> table, it will be created. If not provided, the 
<cite>choice_column</cite> will be used. If the column already exists, choices will be cast 
to match its data type. If the column is generated on the fly, it will be given 
the same data type as the index of the alternatives table. Replaces the 
<cite>out_fname</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_chooser_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the chooser data before simulation. If not provided, no 
filters will be applied. Replaces the <cite>predict_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>out_alt_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Filters to apply to the alternatives data before simulation. If not provided, no 
filters will be applied. Replaces the <cite>predict_filters</cite> argument in UrbanSim.</p>
</dd>
<dt><strong>constrained_choices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">“True” means alternatives have limited capacity. “False” (default) means that 
alternatives can accommodate an unlimited number of choosers.</p>
</dd>
<dt><strong>alt_capacity</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of a column in the out_alternatives table that expresses the capacity of
alternatives. If not provided and constrained_choices is True, each alternative
is interpreted as accommodating a single chooser.</p>
</dd>
<dt><strong>chooser_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of a column in the out_choosers table that expresses the size of choosers.
Choosers might have varying sizes if the alternative capacities are amounts 
rather than counts – e.g. square footage. Chooser sizes must be in the same units
as alternative capacities. If not provided and constrained_choices is True, each
chooser has a size of 1.</p>
</dd>
<dt><strong>max_iter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int or None, optional</span></dt>
<dd><p class="first last">Maximum number of choice simulation iterations. If None (default), the algorithm
will iterate until all choosers are matched or no alternatives remain.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the model step, passed to ModelManager. If none is provided, a name is
generated each time the <cite>fit()</cite> method runs.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">Tags, passed to ModelManager.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>All parameters can also be get and set as properties. The following attributes should</strong></dt>
<dd></dd>
<dt><strong>be treated as read-only.</strong></dt>
<dd></dd>
<dt><strong>choices</strong> <span class="classifier-delimiter">:</span> <span class="classifier">pd.Series</span></dt>
<dd><p class="first last">Available after the model step is run. List of chosen alternative id’s, indexed 
with the chooser id. Does not persist when the model step is reloaded from 
storage.</p>
</dd>
<dt><strong>mergedchoicetable</strong> <span class="classifier-delimiter">:</span> <span class="classifier">choicemodels.tools.MergedChoiceTable</span></dt>
<dd><p class="first last">Table built for estimation or simulation. Does not persist when the model step is 
reloaded from storage. Not available if choices have capacity constraints,
because multiple choice tables are generated iteratively.</p>
</dd>
<dt><strong>model</strong> <span class="classifier-delimiter">:</span> <span class="classifier">choicemodels.MultinomialLogitResults</span></dt>
<dd><p class="first last">Available after a model has been fit. Persists when reloaded from storage.</p>
</dd>
<dt><strong>probabilities</strong> <span class="classifier-delimiter">:</span> <span class="classifier">pd.Series</span></dt>
<dd><p class="first last">Available after the model step is run – but not if choices have capacity 
constraints, which requires probabilities to be calculated multiple times. 
Provides list of probabilities corresponding to the sampled alternatives, indexed 
with the chooser and alternative id’s. Does not persist when the model step is 
reloaded from storage.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.LargeMultinomialLogitStep.fit" title="urbansim_templates.models.LargeMultinomialLogitStep.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>([mct])</td>
<td>Fit the model; save and report results.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.LargeMultinomialLogitStep.from_dict" title="urbansim_templates.models.LargeMultinomialLogitStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.LargeMultinomialLogitStep.run" title="urbansim_templates.models.LargeMultinomialLogitStep.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>([chooser_batch_size,&nbsp;interaction_terms])</td>
<td>Run the model step: simulate choices and use them to update an Orca column.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.LargeMultinomialLogitStep.to_dict" title="urbansim_templates.models.LargeMultinomialLogitStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>bind_to</strong></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><strong>send_to_listeners</strong></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim_templates.models.LargeMultinomialLogitStep.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>mct=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/large_multinomial_logit.html#LargeMultinomialLogitStep.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.LargeMultinomialLogitStep.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model; save and report results. This uses the ChoiceModels estimation 
engine (originally from UrbanSim MNL).</p>
<p>The <cite>fit()</cite> method can be run as many times as desired. Results will not be saved
with Orca or ModelManager until the <cite>register()</cite> method is run.</p>
<p>After sampling alternatives for each chooser, the merged choice table is saved to 
the class object for diagnostic use (<cite>mergedchoicetable</cite> with type
choicemodels.tools.MergedChoiceTable).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>mct</strong> <span class="classifier-delimiter">:</span> <span class="classifier">choicemodels.tools.MergedChoiceTable</span></dt>
<dd><p class="first last">This parameter is a temporary backdoor allowing us to pass in a more 
complicated choice table than can be generated within the template, for 
example including sampling weights or interaction terms.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="urbansim_templates.models.LargeMultinomialLogitStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/large_multinomial_logit.html#LargeMultinomialLogitStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.LargeMultinomialLogitStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>LargeMultinomialLogitStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.LargeMultinomialLogitStep.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>chooser_batch_size=None</em>, <em>interaction_terms=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/large_multinomial_logit.html#LargeMultinomialLogitStep.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.LargeMultinomialLogitStep.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the model step: simulate choices and use them to update an Orca column.</p>
<p>The simulated choices are saved to the class object for diagnostics. If choices 
are unconstrained, the choice table and the probabilities of sampled alternatives 
are saved as well.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>chooser_batch_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">This parameter gets passed to 
choicemodels.tools.simulation.iterative_lottery_choices and is a temporary
workaround for dealing with memory issues that arise from generating massive
merged choice tables for simulations that involve large numbers of choosers,
large numbers of alternatives, and large numbers of predictors. It allows the
user to specify a batch size for simulating choices one chunk at a time.</p>
</dd>
<dt><strong>interaction_terms</strong> <span class="classifier-delimiter">:</span> <span class="classifier">pandas.Series, pandas.DataFrame, or list of either, optional</span></dt>
<dd><p class="first last">Additional column(s) of interaction terms whose values depend on the 
combination of observation and alternative, to be merged onto the final data 
table. If passed as a Series or DataFrame, it should include a two-level 
MultiIndex. One level’s name and values should match an index or column from 
the observations table, and the other should match an index or column from the 
alternatives table.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>None</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.LargeMultinomialLogitStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/large_multinomial_logit.html#LargeMultinomialLogitStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.LargeMultinomialLogitStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="segmented-large-multinomial-logit">
<h2>Segmented Large Multinomial Logit<a class="headerlink" href="#segmented-large-multinomial-logit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">SegmentedLargeMultinomialLogitStep</code><span class="sig-paren">(</span><em>defaults=None</em>, <em>segmentation_column=None</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep" title="Permalink to this definition">¶</a></dt>
<dd><p>This template automatically generates a set of LargeMultinomialLogitStep submodels
corresponding to “segments” or categories of choosers. The submodels can be directly 
accessed and edited.</p>
<p>Running ‘build_submodels()’ will create a submodel for each category of choosers
identified in the segmentation column. The submodels are implemented using filter
queries.</p>
<p>Once they are generated, the ‘submodels’ property contains a dict of
LargeMultinomialLogitStep objects, identified by category name. You can edit their 
properties as needed, fit them individually, etc.</p>
<p>Editing a property in the ‘defaults’ object will update all the submodels at once, 
while leaving customizations to other properties intact.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>defaults</strong> <span class="classifier-delimiter">:</span> <span class="classifier">LargeMultinomialLogitStep, optional</span></dt>
<dd><p class="first last">Object containing initial parameter values for the submodels. Values for
‘choosers’, ‘alternatives’, and ‘choice_column’ are required to generate 
submodels, but do not have to be provided when the object is created.</p>
</dd>
<dt><strong>segmentation_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of a column of categorical values in the ‘defaults.choosers’ table. Any data 
that can be interpreted by Pandas as categorical is valid. This is required to 
generate submodels, but does not have to be provided when the object is created.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Name of the model step.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">Tags associated with the model step.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out_tables</strong></dt>
<dd></dd>
<dt><strong>tables</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.build_submodels" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.build_submodels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">build_submodels</span></code></a>()</td>
<td>Create a submodel for each category of choosers identified in the segmentation column.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.fit_all" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.fit_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit_all</span></code></a>()</td>
<td>Fit all the submodels.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.from_dict" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.get_segmentation_column" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.get_segmentation_column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_segmentation_column</span></code></a>()</td>
<td>Get the column of segmentation values from Orca.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run</span></code></a>()</td>
<td>Convenience method (requied by template spec) that invokes <cite>run_all()</cite>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run_all" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run_all"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_all</span></code></a>()</td>
<td>Run all the submodels.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.to_dict" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.update_submodels" title="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.update_submodels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_submodels</span></code></a>(param,&nbsp;value)</td>
<td>Updates a property across all the submodels.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.build_submodels">
<code class="descname">build_submodels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.build_submodels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.build_submodels" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a submodel for each category of choosers identified in the segmentation
column. Only categories with at least one observation remaining after applying
chooser and alternative filters will be included.</p>
<p>Running this method will overwrite any previous submodels.</p>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.fit_all">
<code class="descname">fit_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.fit_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.fit_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit all the submodels. Build the subomdels first, if they don’t exist yet. This 
method can be run as many times as desired.</p>
</dd></dl>

<dl class="classmethod">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>SegmentedLargeMultinomialLogitStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.get_segmentation_column">
<code class="descname">get_segmentation_column</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.get_segmentation_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.get_segmentation_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the column of segmentation values from Orca. Chooser and alternative filters 
are applied to identify valid observations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>pd.Series</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method (requied by template spec) that invokes <cite>run_all()</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run_all">
<code class="descname">run_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.run_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.run_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all the submodels.</p>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.SegmentedLargeMultinomialLogitStep.update_submodels">
<code class="descname">update_submodels</code><span class="sig-paren">(</span><em>param</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/segmented_large_multinomial_logit.html#SegmentedLargeMultinomialLogitStep.update_submodels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.SegmentedLargeMultinomialLogitStep.update_submodels" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates a property across all the submodels. This method is bound to the 
<cite>defaults</cite> object and runs automatically when one of its properties is changed.</p>
<p>Note that the <cite>chooser_filters</cite> and <cite>alt_filters</cite> properties cannot currently be 
updated this way, because they can affect the model segmentation. If you are 
confident the changes are valid, you can edit the submodels directly. Otherwise,
you can regenerate them using updated defaults by running <cite>build_submodels()</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Property name.</p>
</dd>
<dt><strong>value</strong> <span class="classifier-delimiter">:</span> <span class="classifier">anything</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="template-step-parent-class">
<h2>Template Step parent class<a class="headerlink" href="#template-step-parent-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="urbansim_templates.models.TemplateStep">
<em class="property">class </em><code class="descclassname">urbansim_templates.models.</code><code class="descname">TemplateStep</code><span class="sig-paren">(</span><em>tables=None</em>, <em>model_expression=None</em>, <em>filters=None</em>, <em>out_tables=None</em>, <em>out_column=None</em>, <em>out_transform=None</em>, <em>out_filters=None</em>, <em>name=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/shared.html#TemplateStep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.TemplateStep" title="Permalink to this definition">¶</a></dt>
<dd><p>Shared functionality for the template classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd><p class="first last">Required to fit a model, but doesn’t have to be provided at initialization.</p>
</dd>
<dt><strong>model_expression</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Required to fit a model, but doesn’t have to be provided at initialization.</p>
</dd>
<dt><strong>filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str ?, optional</span></dt>
<dd><p class="first last">Replaces <cite>fit_filters</cite> argument.</p>
</dd>
<dt><strong>out_tables</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str, optional</span></dt>
<dd></dd>
<dt><strong>out_column</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">Replaces <cite>out_fname</cite> argument.</p>
</dd>
<dt><strong>out_transform</strong> <span class="classifier-delimiter">:</span> <span class="classifier">callable, optional</span></dt>
<dd><p class="first last">Replaces <cite>ytransform</cite> argument.</p>
</dd>
<dt><strong>out_filters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str or list of str ?, optional</span></dt>
<dd><p class="first last">Replaces <cite>predict_filters</cite> argument.</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">For ModelManager.</p>
</dd>
<dt><strong>tags</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list of str, optional</span></dt>
<dd><p class="first last">For ModelManager.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Attributes:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out_tables</strong></dt>
<dd></dd>
<dt><strong>tables</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#urbansim_templates.models.TemplateStep.from_dict" title="urbansim_templates.models.TemplateStep.from_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_dict</span></code></a>(d)</td>
<td>Create an object instance from a saved dictionary representation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#urbansim_templates.models.TemplateStep.to_dict" title="urbansim_templates.models.TemplateStep.to_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">to_dict</span></code></a>()</td>
<td>Create a dictionary representation of the object.</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="urbansim_templates.models.TemplateStep.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/shared.html#TemplateStep.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.TemplateStep.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an object instance from a saved dictionary representation.</p>
<p>Child classes will need to override this method to implement loading of custom
parameters and estimation results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>d</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>TemplateStep</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urbansim_templates.models.TemplateStep.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/urbansim_templates/models/shared.html#TemplateStep.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urbansim_templates.models.TemplateStep.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary representation of the object.</p>
<p>Child classes will need to override this method to implement saving of custom
parameters and estimation results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="modelmanager.html" class="btn btn-neutral" title="ModelManager API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, UrbanSim Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>